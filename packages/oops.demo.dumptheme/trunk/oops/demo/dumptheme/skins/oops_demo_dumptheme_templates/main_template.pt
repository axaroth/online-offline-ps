<metal:page define-macro="master">
<metal:block define-slot="top_slot" />

<tal:doctype tal:replace="structure string:&lt;!DOCTYPE html PUBLIC
  &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" />
<metal:block use-macro="here/global_defines/macros/defines" />

<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      tal:define="lang language"
      tal:attributes="lang lang;
                      xml:lang lang">

  <tal:cache tal:define="charset site_properties/default_charset|string:utf-8">
    <metal:cache use-macro="here/global_cache_settings/macros/cacheheaders">
      Get the global cache headers located in global_cache_settings.
    </metal:cache>
  </tal:cache>

  <head>

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"
          tal:define="charset site_properties/default_charset|string:utf-8"
          tal:attributes="content string:text/html;;charset=${charset}" />

    <meta name="generator" content="Plone - http://plone.org" />

    <!-- Internet Explorer fix, forces IE8 into newest possible rendering
         engine even if it's on an intranet. This has to be defined before any
         script/style tags. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <metal:baseslot define-slot="base">
      <base tal:attributes="href here/renderBase" /><!--[if lt IE 7]></base><![endif]-->
    </metal:baseslot>

    <meta tal:define="metatags python:putils.listMetaTags(here).items()"
          tal:condition="metatags"
          tal:repeat="keyval metatags"
          tal:attributes="name python:keyval[0];
                          content python:keyval[1];" />
                          
    <!-- Disable IE6 image toolbar -->
    <meta http-equiv="imagetoolbar" content="no" />

    <tal:comment replace="nothing"> A slot where you can insert elements in the header from a template </tal:comment>
    <metal:headslot define-slot="head_slot" />

    <tal:comment replace="nothing"> A slot where you can insert CSS in the header from a template </tal:comment>
    <metal:styleslot define-slot="style_slot" />

    <tal:comment replace="nothing"> This is deprecated, please use style_slot instead. </tal:comment>
    <metal:cssslot define-slot="css_slot" />

    <link href="http://localhost:8080/er/base.css" media="screen" rel="stylesheet" type="text/css"
          tal:attributes="href string:${portal_url}/base.css"/>
          
    <tal:comment replace="nothing"> A slot where you can insert javascript in the header from a template </tal:comment>
    <metal:javascriptslot define-slot="javascript_head_slot" ></metal:javascriptslot>
    <script dump="true" type="text/javascript" src="jquery-1.3.2.min.js"
      tal:attributes="src string:${portal_url}/jquery-1.3.2.min.js"></script>
    <script dump="true" type="text/javascript" src="jquery.getParams.js"
      tal:attributes="src string:${portal_url}/jquery.getParams.js"></script>
    <script dump="true" type="text/javascript" src="gears_init.js"
      tal:attributes="src string:${portal_url}/gears_init.js"></script>
    <script dump="true" type="text/javascript" src="offline.js"
      tal:attributes="src string:${portal_url}/offline.js"></script>

  </head>
<body tal:define="template_id python:template.id or path('view/__name__');
                    class_expr string:${context/getSectionFromURL} template-${template_id};"
        tal:attributes="class python:class_expr.strip();
                        dir python:test(isRTL, 'rtl', 'ltr')">

<div id="visual-portal-wrapper">

  <div id="portal-top" i18n:domain="plone">
    <div tal:replace="structure provider:plone.portaltop" />
  </div>
  
 <metal:block define-slot="above-content">
         <div id="viewlet-above-content" tal:content="structure provider:plone.abovecontent" class="clearfix container_3"/>
  </metal:block>
  
  <div id="content-wrapper" class="container clearfix container_3" tal:define="tabindex python:Iterator(mainSlot=False)">
    <metal:block define-slot="content">
      <div metal:define-macro="content"
           tal:define="show_border context/@@plone/showEditableBorder"
           id="main-content">
        <span id="contentTopLeft"></span>
        <span id="contentTopRight"></span>
        <a name="documentContent"></a>
        
        <div metal:use-macro="here/global_statusmessage/macros/portal_message">Portal status message</div>
        
        <metal:slot metal:define-slot="body">
          <div id="content" class="clearfix container_3" tal:omit-tag="not:context/@@plone_context_state/is_view_template">
            <metal:header metal:define-slot="header" tal:content="nothing">Visual Header</metal:header>
            <metal:bodytext metal:define-slot="main" tal:content="nothing">Page body text</metal:bodytext>
          </div>
        </metal:slot>
        
        <metal:sub metal:define-slot="sub">
          <div tal:replace="structure provider:plone.belowcontent" />
        </metal:sub>
        
        <span id="contentBottomLeft"></span>
        <span id="contentBottomRight"></span>
      </div>
    </metal:block>
  </div><!--fine content-wrapper-->
  
  <div id="portal-footer" class="clearfix">
    <div id="footer">
      <!-- footer actions -->
    </div>
  </div>
  
</div><!--end portal-wrapper-->
</body>
</html>
</metal:page>
