<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="collective.book">
<body>

  <metal:hide_column metal:fill-slot="column_two_slot" />

  <div metal:fill-slot="main">
  <tal:main-macro metal:define-macro="main"
                  tal:define="books view/books">


    <ol tal:condition="books" data-role="listview" data-inset="true">
      <li data-role="list-divider">Table of contents</li>
      <li tal:repeat="book books"><span tal:replace="book/title"></span>
        <ol tal:define="chapters python:view.chapters(book)"
            tal:condition="chapters">
          <li tal:repeat="chapter chapters">
            <a tal:attributes="href string:${chapter/absolute_url};
                               title chapter/Description;"
               tal:content="chapter/Title">Chapter's title</a>
          </li>
        </ol>
      </li>
    </ol>
    
    <span tal:condition="not:books">Sorry! seems to be an error </span>

    <div tal:replace="structure provider:plone.abovecontentbody" />
      
    </tal:main-macro>
</div>

</body>
</html>
